<div class="container mt-5">
  <div class="container mt-4">
    <div class="card mb-4 shadow-sm">
      <div class="card-header bg-primary text-white">
        <h3 class="card-title mb-0">Token Balances</h3>
      </div>
      <div class="card-body">
        <table class="table table-bordered text-center">
          <tbody>
            <tr>
              <th scope="row" class="font-weight-bold">Account ID</th>
              <td class="font-weight-bold">{{ accountId }}</td>
            </tr>
            <tr>
              <th scope="row" class="font-weight-bold">MPT Balance</th>
              <td class="font-weight-bold">{{ mptBalance }}</td>
            </tr>
            <tr>
              <th scope="row" class="font-weight-bold">MST Balance</th>
              <td class="font-weight-bold">{{ mstBalance }}</td>
            </tr>
            <tr>
              <th scope="row" class="font-weight-bold">Staked Amount</th>
              <td class="font-weight-bold">{{ stakes }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="d-flex justify-content-center mb-4">
    <button class="btn btn-primary mx-2" (click)="toggleForm('sendTokens')">
      Send Tokens
    </button>
    <button class="btn btn-success mx-2" (click)="toggleForm('stakeTokens')">
      Stake Tokens
    </button>
    <button
      *ngIf="stakes > 0"
      class="btn btn-danger mx-2"
      (click)="toggleForm('unstakeTokens')"
    >
      Unstake Tokens
    </button>
    <button
      *ngIf="stakes > 0"
      class="btn btn-info mx-2"
      (click)="toggleForm('claimRewards')"
    >
      Claim Rewards
    </button>
    <button class="btn btn-warning mx-2" (click)="toggleForm('addFavorite')">
      Add Favorite
    </button>
    <button class="btn btn-info mx-2" (click)="toggleForm('favorites')">
      My Favorites
    </button>
  </div>

  <!-- Add Favorite Form -->
  <div *ngIf="showAddFavoriteForm" class="card mb-4">
    <div class="card-header">
      <h3 class="card-title">Add Favorite</h3>
    </div>
    <div class="card-body">
      <form [formGroup]="favoriteForm" (ngSubmit)="addFavorite()">
        <div class="form-group mb-3">
          <label for="alias">Alias</label>
          <input
            id="alias"
            class="form-control"
            formControlName="alias"
            type="text"
            required
          />
        </div>
        <div class="form-group mb-3">
          <label for="accountId">Account ID</label>
          <input
            id="accountId"
            class="form-control"
            formControlName="accountId"
            type="text"
            required
          />
        </div>
        <button
          type="submit"
          class="btn btn-success"
          [disabled]="favoriteForm.invalid || favoriteSpinner"
        >
          Add Favorite
          <span
            *ngIf="favoriteSpinner"
            class="spinner-border spinner-border-sm ms-2"
          ></span>
        </button>
      </form>
    </div>
  </div>

  <div *ngIf="showFavorites" class="card p-4 mb-4">
    <div class="table-responsive">
      <table class="table table-striped">
        <thead>
          <tr>
            <th scope="col">Alias</th>
            <th scope="col">Account ID</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let favorite of favorites">
            <td>{{ favorite.alias }}</td>
            <td>
              {{ favorite.accountId }}
              <button
                class="btn btn-outline-secondary btn-sm"
                (click)="copyToClipboard(favorite.accountId)"
              >
                Copy
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div *ngIf="showSendTokensForm" class="card mb-4">
    <div class="card-header">
      <h3 class="card-title">Send Tokens</h3>
    </div>
    <div class="card-body">
      <form (ngSubmit)="sendTransaction()">
        <div class="form-group mb-3">
          <label for="recipientAccountId">Recipient Account ID</label>
          <input
            type="text"
            id="recipientAccountId"
            class="form-control"
            [(ngModel)]="recipientAccountId"
            name="recipientAccountId"
            required
          />
        </div>
        <div class="form-group mb-3">
          <label for="transactionAmount">Amount</label>
          <input
            type="number"
            id="transactionAmount"
            class="form-control"
            [(ngModel)]="transactionAmount"
            name="transactionAmount"
            required
          />
        </div>
        <button type="submit" class="btn btn-primary" [disabled]="sendSpinner">
          Send
          <span
            *ngIf="sendSpinner"
            class="spinner-border spinner-border-sm ms-2"
          ></span>
        </button>
      </form>
    </div>
  </div>

  <div *ngIf="showStakeTokensForm" class="card mb-4">
    <div class="card-header">
      <h3 class="card-title">Stake Tokens</h3>
    </div>
    <div class="card-body">
      <form (ngSubmit)="stakeTokens()">
        <div class="form-group mb-3">
          <label for="stakeAmount">Amount</label>
          <input
            type="number"
            id="stakeAmount"
            class="form-control"
            [(ngModel)]="stakeAmount"
            name="stakeAmount"
            required
          />
        </div>
        <button type="submit" class="btn btn-success" [disabled]="stakeSpinner">
          Stake
          <span
            *ngIf="stakeSpinner"
            class="spinner-border spinner-border-sm ms-2"
          ></span>
        </button>
      </form>
    </div>
  </div>

  <div *ngIf="showUnstakeTokensForm" class="card mb-4">
    <div class="card-header">
      <h3 class="card-title">Unstake Tokens</h3>
    </div>
    <div class="card-body">
      <form (ngSubmit)="unstakeTokens()">
        <div class="form-group mb-3">
          <label for="unstakeAmount">Amount</label>
          <input
            type="number"
            id="unstakeAmount"
            class="form-control"
            [(ngModel)]="unstakeAmount"
            name="unstakeAmount"
            required
          />
        </div>
        <button
          type="submit"
          class="btn btn-danger"
          [disabled]="unstakeSpinner"
        >
          Unstake
          <span
            *ngIf="unstakeSpinner"
            class="spinner-border spinner-border-sm ms-2"
          ></span>
        </button>
      </form>
      <button
        class="btn btn-warning mt-3"
        (click)="unstakeAllTokens()"
        [disabled]="unstakeSpinner"
      >
        Unstake All
        <span
          *ngIf="unstakeSpinner"
          class="spinner-border spinner-border-sm ms-2"
        ></span>
      </button>
    </div>
  </div>

  <div *ngIf="showClaimRewardsForm" class="card mb-4">
    <div class="card-header">
      <h3 class="card-title">Claim Rewards</h3>
    </div>
    <div class="card-body">
      <button
        class="btn btn-info"
        (click)="claimRewards()"
        [disabled]="claimSpinner"
      >
        Claim Rewards
        <span
          *ngIf="claimSpinner"
          class="spinner-border spinner-border-sm ms-2"
        ></span>
      </button>
    </div>
  </div>
</div>
